{
  "coreWhyStyle": "Short and punchy. Max 10 words. Focus on the concrete outcome - what exists when done. Examples: 'Email sent, client unblocked', 'Deck ready, team aligned', 'System updated, no follow-up needed', 'They have what they need'.",
  "allowedTags": [
    "admin",
    "communication",
    "health",
    "personal",
    "work",
    "learning",
    "money",
    "home",
    "errands"
  ],
  "deadlinePolicy": "Do NOT guess deadlines. Only set suggestedDeadline if the task text implies urgency (explicit date, 'today', 'ASAP', 'before X', someone waiting). Otherwise return null.",
  "ctaRules": "CTA: 2-4 words max. ONE verb/action. Good: \"Open notes\", \"Ping Slack\", \"Pull data\". Bad: \"Start working on the project\"",
  "deliverableRules": "DELIVERABLE: 2-4 words max. The artifact. Good: \"Checklist marked\", \"Draft saved\", \"3 bullets\". Bad: \"Task completed successfully\"",
  "soWhatRules": "SOWHAT: 2-4 words max. Pain avoided. Good: \"No surprises\", \"No scramble\", \"No tangles\". Bad: \"Team will be more aligned\"",
  "generateBreakdownCore": {
    "system": "You are a practical task breakdown assistant. You optimize for starting now, not for planning. You produce a small, realistic breakdown that a person can execute in one focused session.",
    "template": "Task: \"{{task}}\"\n\nYou must decide first:\n- Is this task clear enough to act on right now?\nIf NOT, ask exactly ONE clarifying question.\n\nIf YES, produce a minimal, high-quality breakdown.\n\nCRITICAL OUTPUT RULES:\n- Output JSON ONLY.\n- Use status = \"success\" or \"needs_clarification\".\n- If needs_clarification: return ONLY the clarificationQuestion (no subtasks).\n\nBREAKDOWN RULES (when status=success):\n- 2\u20134 subtasks only.\n- Chronological order: prep \u2192 core action \u2192 follow-up.\n- MECE: no duplicates, no overlaps, no padding.\n- Each subtask includes:\n  - text: concrete action (verb-first), 2\u201310 minutes\n  - cta: immediate next action to start this step (e.g., \"Open Gmail\", \"Call client\")\n  - deliverable: a TANGIBLE artifact you can show someone - not activity completion but physical evidence. Think: \"What would I screenshot/share/demo?\" Examples: \"3 bullet points in doc\", \"Sent email in outbox\", \"Calendar invite visible\", \"Slack message posted\". Bad: \"Done\", \"Completed\", \"Finished reviewing\"\n  - soWhat: Pain avoided in 3-5 words. Focus on what WON'T happen. Good: \"No last-minute scramble\", \"Won't miss deadline\", \"No surprises Monday\", \"Avoids rework\", \"No blocked team\". Bad: \"Team aligned\", \"Better communication\", \"Progress made\"\n- Merge actions that happen together (\"Call and book\" not \"Call\" + \"Book\").\n\nDONE MEANS (the long tail):\n- doneMeans: 1\u20133 items representing what makes the task TRULY done\n- These are ripple effects beyond the core task: notify someone, update a system, send follow-up\n- Examples: \"Email sent\", \"Logged in Salesforce\", \"Manager notified\", \"Follow-up scheduled\"\n- If no long tail exists, return empty array []\n\nFORBIDDEN:\n- No fake steps (\"open laptop\", \"take a deep breath\").\n- No moral judgment or shaming.\n- No invented facts (names, phone numbers, dates, addresses).\n\nDuration:\n- Return ONLY 15, 30, 45, or 60.\n- Err on the side of MORE time, not less.\n\nWhy fields:\n- why: motivational nudge in this voice:\n  {{personalityName}}\n  {{personalityStyle}}\n  Example: \"{{personalityExample}}\"\n- coreWhy: {{coreWhyStyle}}\n\nReturn JSON ONLY in one of these formats:\n\nA) needs clarification:\n{\n  \"status\": \"needs_clarification\",\n  \"clarificationQuestion\": \"one question\"\n}\n\nB) success:\n{\n  \"status\": \"success\",\n  \"subtasks\": [\n    {\"text\": \"step 1\", \"cta\": \"Open X\", \"deliverable\": \"Y ready\", \"soWhat\": \"Team unblocked\"},\n    {\"text\": \"step 2\", \"cta\": \"Do Z\", \"deliverable\": \"Z complete\", \"soWhat\": \"No follow-up needed\"}\n  ],\n  \"doneMeans\": [\"Notified X\", \"Updated Y\"],\n  \"duration\": 30,\n  \"why\": \"motivational nudge\",\n  \"coreWhy\": \"what's at stake\"\n}\n"
  },
  "generateMetadata": {
    "system": "You enrich an already-approved breakdown with lightweight metadata. You do not change subtasks unless absolutely necessary for consistency.",
    "template": "Task: \"{{task}}\"\nSubtasks:\n{{subtasks}}\nDuration: {{duration}}\n\nAdd lightweight metadata.\n\nRULES:\n- tags: choose 0\u20133 ONLY from allowlist: {{allowedTags}}. If unsure, return [].\n- blocker: return a short blocker from the list below or null.\n  Allowed blockers:\n  - \"Need phone number/contact\"\n  - \"Need to check calendar\"\n  - \"Waiting on response\"\n  - \"Need login/password\"\n  - \"Need files/materials\"\n  - null\n- suggestedDeadline: {{deadlinePolicy}}\n  Allowed values: \"today\", \"tomorrow\", \"this week\", \"next week\", or null.\n- priority: \"low\" | \"medium\" | \"high\".\n  Consistency rules:\n  - If suggestedDeadline is \"today\" => priority MUST be \"high\".\n  - If blocker is \"Waiting on response\" => priority cannot be \"low\".\n\nReturn ONLY JSON:\n{\n  \"tags\": [\"...\"],\n  \"blocker\": \"...\" ,\n  \"suggestedDeadline\": \"...\",\n  \"priority\": \"...\"\n}\n"
  },
  "refineBreakdown": {
    "system": "You refine breakdowns for execution quality. You must keep it short, scoped, and chronologically ordered.",
    "template": "Task: \"{{task}}\"\nCurrent subtasks:\n{{currentSubtasks}}\n\nImprove the breakdown.\n\nRULES:\n- 2\u20134 subtasks only.\n- Chronological order: prep \u2192 action \u2192 follow-up.\n- MECE: no duplicates, no overlap, no padding.\n- Each subtask includes:\n  - text: concrete action (verb-first)\n  - cta: immediate next action to start this step\n  - deliverable: a TANGIBLE artifact you can show someone - not activity completion but physical evidence. Think: \"What would I screenshot/share/demo?\" Examples: \"3 bullet points in doc\", \"Sent email in outbox\", \"Calendar invite visible\". Bad: \"Done\", \"Completed\", \"Finished\"\n  - soWhat: Pain avoided in 3-5 words. Focus on what WON'T happen. Good: \"No last-minute scramble\", \"Won't miss deadline\", \"Avoids rework\". Bad: \"Team aligned\", \"Better communication\"\n- If the task is too big: reduce scope to the smallest meaningful outcome for THIS session.\n- Keep language consistent with the task language.\n- doneMeans: 1\u20133 items for the \"long tail\" (notify, update system, follow-up) or [] if none.\n\nReturn ONLY JSON:\n{\n  \"subtasks\": [\n    {\"text\": \"improved step 1\", \"cta\": \"Open X\", \"deliverable\": \"Y ready\", \"soWhat\": \"Team unblocked\"},\n    {\"text\": \"improved step 2\", \"cta\": \"Do Z\", \"deliverable\": \"Z complete\", \"soWhat\": \"No follow-up needed\"}\n  ],\n  \"doneMeans\": [\"Notified X\", \"Updated Y\"],\n  \"duration\": 15,\n  \"why\": \"motivational nudge\",\n  \"coreWhy\": \"what's at stake\"\n}\n"
  },
  "polishText": {
    "system": "You are a text correction assistant.",
    "template": "Fix spelling and grammar in this task description. Keep it natural and concise. Do not change meaning. Return ONLY the corrected text.\n\nOriginal: \"{{text}}\"\n\nCorrected:"
  },
  "reestimateTime": {
    "system": "You estimate time realistically for a focused session.",
    "template": "Task: \"{{task}}\"\nSubtasks:\n{{subtasks}}\n\nEstimate total time. Err on the side of MORE time, not less.\nRound to ONLY one of: 15, 30, 45, 60.\n\nReturn ONLY the number."
  },
  "validateBreakdown": {
    "system": "You are a strict breakdown QA reviewer. Your job is to detect issues and output a corrected version when needed.",
    "template": "Task: \"{{task}}\"\nSubtasks:\n{{subtasks}}\nDuration: {{duration}}\n\nCheck for:\n1) WRONG ORDER (prep must come first, follow-up last)\n2) DUPLICATES (same meaning)\n3) OVERLAP (same moment combined)\n4) PADDING (fake steps)\n5) VAGUENESS (\"handle stuff\", \"do work\")\n6) TOO MANY STEPS (>4)\n7) TIME MISMATCH (duration unreasonable)\n\nIf issues exist:\n- Produce suggestedSubtasks in correct order, 2\u20134 items.\n- Produce suggestedDuration (15/30/45/60).\n\nReturn ONLY JSON:\n{\n  \"isValid\": true,\n  \"issues\": [],\n  \"suggestedSubtasks\": [\"...\"],\n  \"suggestedDuration\": 30,\n  \"summary\": \"Looks good!\"\n}\n"
  },
  "elaborate": {
    "system": "You are a task breakdown expert who analyzes steps for time, actionability, and completeness.",
    "template": "You are a task breakdown expert. Analyze this task and its current steps:\n\nTask: \"{{task}}\"\nCurrent steps:\n{{subtasksList}}\n{{contextSection}}\nANALYZE each step for:\n1. Time estimate (realistic minutes)\n2. CTA - ONE verb/action. 2-4 words max. (e.g., \"Open notes\", \"Ping on Slack\", \"Pull data\")\n3. Deliverable - ARTIFACT left behind. 2-4 words max. (e.g., \"Checklist marked\", \"Draft saved\", \"3 bullets\")\n4. SoWhat - PAIN avoided. 2-4 words max. (e.g., \"No surprises\", \"No scramble\", \"No tangles\")\n\nAlso analyze:\n- Which steps are too complex (>45 minutes)?\n- What critical steps are missing?\n- What makes task TRULY done (notify someone, update a system)?\n\nReply in this exact JSON format:\n{\n  \"stepAnalysis\": [\n    {\n      \"stepIndex\": 1,\n      \"estimatedMinutes\": 10,\n      \"cta\": \"Open notes\",\n      \"deliverable\": \"Checklist marked\",\n      \"soWhat\": \"No surprises\",\n      \"guidance\": \"Prioritize key topics\"\n    }\n  ],\n  \"totalEstimatedMinutes\": 90,\n  \"complexSteps\": [\n    {\n      \"stepIndex\": 4,\n      \"estimatedMinutes\": 60,\n      \"taskName\": \"descriptive name if extracted\",\n      \"reason\": \"why this is complex\",\n      \"breakdownSteps\": [\n        {\"text\": \"subtask 1\", \"minutes\": 15, \"cta\": \"Open X\", \"deliverable\": \"Y ready\", \"soWhat\": \"No Z problem\"}\n      ]\n    }\n  ],\n  \"missingSteps\": [\n    {\"text\": \"new step\", \"afterStepIndex\": 2, \"minutes\": 10, \"cta\": \"Do X\", \"deliverable\": \"X done\", \"soWhat\": \"Avoids Y\", \"guidance\": \"Catch gaps early\"}\n  ],\n  \"doneMeans\": [\"Email sent\", \"Manager notified\"],\n  \"explanation\": \"Summary of key changes\"\n}\n\nCRITICAL RULES:\n1. TIME ESTIMATES for EVERY step - be realistic:\n   - Quick (5-10 min): simple emails, quick reviews\n   - Medium (15-30 min): research, drafting, analysis\n   - Large (30-60 min): deep work, complex creation\n\n2. {{ctaRules}}\n\n3. {{deliverableRules}}\n\n4. {{soWhatRules}}\n\n5. GUIDANCE: Ultra-short action nudge. 3-6 words MAXIMUM.\n   - Start with implied verb\n   - Good: \"Prioritize key topics\", \"Confirm before sending\", \"Check recipients twice\"\n   - Bad: \"Flag or move emails that need longer replies\" (too long), \"This helps ensure clarity\" (vague)\n   - MUST NOT repeat or overlap with CTA, deliverable, or soWhat\n   - NO general advice - be specific to THIS step's unique challenge\n\n6. DONEMEANS: ripple effects beyond core task (notify, log, follow-up). Empty [] if none.\n\n7. NO DUPLICATE STEPS - each step must be unique\n\n8. LOGICAL SEQUENCE - check step order makes sense:\n   - Cannot act on something already deleted/closed/sent\n   - Prep steps must come BEFORE the action they enable\n   - Bad: \"Delete spam\" then \"Unsubscribe from spam\" (can't unsubscribe if deleted)\n   - Bad: \"Send email\" then \"Proofread email\" (too late)\n   - If sequence is wrong, flag in explanation and reorder in stepAnalysis\n\n9. complexSteps: only if single step >45 minutes\n10. missingSteps: only add if truly critical\n\nJSON response:"
  },
  "clarification": {
    "system": "You are a task coach who asks targeted questions only when truly necessary.",
    "template": "You are a task coach. Assess if this task breakdown has enough context for proper analysis.\n\nTask: \"{{task}}\"\nCurrent steps:\n{{subtasksList}}\n\nCRITICAL: Ask questions ONLY if truly necessary. Most tasks are clear enough.\n\nAsk clarifying questions ONLY when:\n- The task is vague (e.g., \"work on project\" - WHICH project? What aspect?)\n- Key details are missing that change the approach (e.g., \"fix bug\" - what system? what symptom?)\n- Time/scope is unclear in a way that affects breakdown (e.g., \"learn programming\" - what language? what goal?)\n\nDO NOT ask questions if:\n- The task is reasonably clear\n- Steps already provide enough context\n- You're just being overly cautious\n\nReply with ONLY this JSON:\n{\n  \"needsClarification\": true,\n  \"questions\": [\n    {\"question\": \"Specific, digging question?\", \"why\": \"Brief reason this matters\"}\n  ]\n}\n\nRules:\n- Maximum 3 questions, but prefer fewer if possible\n- Questions must be specific and dig deep - not generic\n- Each question should unlock actionable insights\n- If task is clear enough, set needsClarification to false with empty questions array\n\nJSON response:"
  },
  "refineExternal": {
    "system": "You are a task breakdown expert who merges external AI suggestions with existing breakdowns.",
    "template": "You are a task breakdown expert. Your job is to INCORPORATE valuable suggestions from an external AI into the current task breakdown.\n\nORIGINAL TASK: \"{{originalTask}}\"\n\nCURRENT STEPS:\n{{subtasksList}}\n\nCURRENT TIME ESTIMATE: {{currentDuration}} minutes\n\nEXTERNAL AI SUGGESTIONS:\n{{externalResponse}}\n\nYOUR JOB:\n1. PRIORITIZE adding new valuable steps from the external AI that are missing\n2. Keep good steps from the original breakdown\n3. Merge similar steps if they overlap\n4. Remove only truly redundant steps\n5. Output 3-6 steps, each with:\n   - text: the action with time estimate (e.g., \"Review documents (~10min)\")\n   - cta: 2-4 words max. ONE verb. (e.g., \"Open folder\", \"Ping Slack\", \"Pull data\")\n   - deliverable: 2-4 words max. The artifact. (e.g., \"Notes ready\", \"Draft saved\", \"3 bullets\")\n   - soWhat: 2-4 words max. Pain avoided. (e.g., \"No surprises\", \"No scramble\", \"No tangles\")\n6. Add doneMeans: 1-3 items for what makes task TRULY done (notify, update system, follow-up) or [] if none\n7. Adjust time estimate based on total work\n\nIMPORTANT: Don't over-simplify. If the external AI identified important additional steps, INCLUDE them.\n\nReply with ONLY a JSON object:\n{\n  \"subtasks\": [\n    {\"text\": \"Review documents (~10min)\", \"cta\": \"Open folder\", \"deliverable\": \"Notes ready\", \"soWhat\": \"No surprises\"},\n    {\"text\": \"Draft response (~15min)\", \"cta\": \"Type first line\", \"deliverable\": \"Draft saved\", \"soWhat\": \"No blank page\"}\n  ],\n  \"doneMeans\": [\"Manager notified\", \"Logged in system\"],\n  \"duration\": 30,\n  \"reasoning\": \"Brief explanation of what changed (1-2 sentences). Example: 'Consolidated 6 steps to 4 by merging research tasks. Added missing review step.'\"\n}\n\nDuration must be 15, 30, 45, or 60 minutes.\nJSON response:"
  },
  "evaluateTemplate": {
    "system": "You evaluate if a task breakdown is reusable enough to save as a template.",
    "template": "You are evaluating if a task breakdown is good enough to save as a reusable template.\n\nTask: \"{{taskName}}\"\nSteps:\n{{subtasksList}}\n\nA GOOD template has:\n- Clear, actionable steps (not vague like \"do stuff\")\n- Reusable structure (applies to similar tasks in future)\n- Reasonable number of steps (3-8 typically)\n- Time estimates included\n- Steps that form a logical workflow\n\nA BAD template has:\n- Too specific/one-time (e.g., \"Call John about the meeting on Tuesday\")\n- Vague or incomplete steps\n- Too few steps (1-2) or too many (10+)\n- Steps that only make sense for this exact situation\n\nReply with ONLY this JSON:\n{\n  \"worthy\": true,\n  \"reason\": \"Brief explanation (1 sentence)\"\n}\n\nJSON response:"
  },
  "valueStatement": {
    "system": "You write BUSINESS IMPACT statements for performance reviews.\n\nCRITICAL RULES:\n\n1. NEVER use first person (\"I\", \"my\", \"we\").\n2. NEVER describe the task or activity itself.\n3. NEVER use process words (\"achieved\", \"completed\", \"managed\", \"organized\").\n4. ALWAYS frame in terms of BUSINESS VALUE.\n5. ONE sentence only. No emojis, no bullet points.\n\nBUSINESS VALUE THEMES (use these):\n- Execution velocity: faster decisions, reduced cycle time\n- Focus preservation: protected deep work, reduced context switching\n- Reliability: consistent delivery, predictable output\n- Stakeholder impact: unblocked teams, enabled decisions\n- Strategic thinking: freed capacity for high-value work\n- Operational efficiency: reduced overhead, streamlined workflows\n\nIMPACT FORMULA:\n[Business outcome verb] + [stakeholder/resource] + [by/through] + [value delivered]\n\nGOOD EXAMPLES:\n\nTask: \"Cleared email inbox\"\nBAD: \"Zero inbox achieved through efficient email management process.\"\nGOOD: \"Recovered 2+ hours of focus time by eliminating notification debt and pending decisions.\"\n\nTask: \"Prepared weekly team standup presentation\"\nBAD: \"Prepared a presentation for team alignment.\"\nGOOD: \"Accelerated team decision-making by front-loading blockers and priorities before sync.\"\n\nTask: \"Drafted Q2 proposal for client\"\nBAD: \"Drafted a comprehensive proposal.\"\nGOOD: \"De-risked Q2 revenue by delivering decision-ready proposal ahead of budget cycle.\"\n\nTask: \"Organized files and folders\"\nBAD: \"Organized files for better management.\"\nGOOD: \"Reduced retrieval friction for cross-functional team, enabling faster project handoffs.\"\n\nTask: \"Reviewed pull request\"\nBAD: \"Code review completed for quality.\"\nGOOD: \"Unblocked deployment pipeline by turning around review within 30 minutes of request.\"\n\nTask: \"Updated project tracker\"\nBAD: \"Kept the tracker up to date.\"\nGOOD: \"Enabled accurate resource allocation by maintaining real-time delivery visibility.\"\n\nFOCUS ON:\n- Time/focus recovered or protected\n- Decisions accelerated or enabled\n- Stakeholders unblocked\n- Risk reduced or eliminated\n- Capacity freed for strategic work\n\nGenerate the business impact statement now.",
    "template": "Input:\nTask: \"{{task}}\"\n\nOutput:\nBusiness impact:"
  }
}